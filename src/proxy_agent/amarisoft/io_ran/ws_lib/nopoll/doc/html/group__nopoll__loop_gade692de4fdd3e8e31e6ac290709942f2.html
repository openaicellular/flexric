<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd"> 
<html xmlns="http://www.w3.org/1999/xhtml"> 
<head> 
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/> 
<title>noPoll websocket implementation , WebSocket implementation, RFC 6455 implementation, (Servidores Linux http://www.aspl.es)</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/> 
<link href="search/search.css" rel="stylesheet" type="text/css"/> 
<script type="text/javaScript" src="search/search.js"></script> 
<link href="doxygen.css" rel="stylesheet" type="text/css"/>
<link href="nopoll.css" rel="stylesheet" type="text/css">
</head>
  <body onload='searchBox.OnSelectItem(0);'>
    <div class="af-arch-header">
     <img src="main-page-logo.png" > <a href="http://www.aspl.es"><img class="aspl-logo-header" src="aspl-logo-header.png"></a>
    </div>
<!--    <div class="ads">
    <iframe src="http://www.aspl.es/web-ads/index.php?hcolor=fdff4f&amp;fsize=10&amp;bg=555753&amp;fg=ffffff&amp;width=800&amp;height=90" scrolling="no" frameborder="0"></iframe> 
    </div>
    <div class="separator">
    </div>
<div class="thepage"> -->
<!-- Generated by Doxygen 1.9.1 -->
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:cf05388f2679ee054f2beb29a391d25f4e673ac3&amp;dn=gpl-2.0.txt GPL-v2 */
var searchBox = new SearchBox("searchBox", "search",false,'Search','.html');
/* @license-end */
</script>
<script type="text/javascript" src="menudata.js"></script>
<script type="text/javascript" src="menu.js"></script>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:cf05388f2679ee054f2beb29a391d25f4e673ac3&amp;dn=gpl-2.0.txt GPL-v2 */
$(function() {
  initMenu('',true,true,'search.php','Search');
/* @license magnet:?xt=urn:btih:cf05388f2679ee054f2beb29a391d25f4e673ac3&amp;dn=gpl-2.0.txt GPL-v2 */
  $(document).ready(function() {
    if ($('.searchresults').length > 0) { searchBox.DOMSearchField().focus(); }
  });
});
/* @license-end */</script>
<div id="main-nav"></div>
<div id="nav-path" class="navpath">
  <ul>
<li class="navelem"><a class="el" href="group__nopoll__loop.html">noPoll Loop: basic support to create a watching loop for WebSocket listeners</a></li>  </ul>
</div>
</div><!-- top -->
<div class="contents">
<table cellspacing="0" cellpadding="0" border="0">
  <tr>
   <td valign="top">
      <div class="navtab">
        <table>
          <tr><td class="navtab"><a class="navtab" href="group__nopoll__loop_ga603ff3fbf35af843128f07915a4f2634.html#ga603ff3fbf35af843128f07915a4f2634">nopoll_loop_stop</a></td></tr>
          <tr><td class="navtabHL"><a class="navtab" href="group__nopoll__loop_gade692de4fdd3e8e31e6ac290709942f2.html#gade692de4fdd3e8e31e6ac290709942f2">nopoll_loop_wait</a></td></tr>
        </table>
      </div>
   </td>
   <td valign="top" class="mempage">
<a id="gade692de4fdd3e8e31e6ac290709942f2"></a>
<h2 class="memtitle"><span class="permalink"><a href="#gade692de4fdd3e8e31e6ac290709942f2">&#9670;&nbsp;</a></span>nopoll_loop_wait()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int nopoll_loop_wait </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="group__nopoll__decl__module_ga0d2aab846f7125cb37acd8a50dc2d0c6.html#ga0d2aab846f7125cb37acd8a50dc2d0c6">noPollCtx</a> *&#160;</td>
          <td class="paramname"><em>ctx</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">long&#160;</td>
          <td class="paramname"><em>timeout</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Allows to implement a wait over all connections registered under the provided context during the provided timeout until something is detected meaningful to the user, calling to the action handler defined, optionally receving the user data pointer. </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">ctx</td><td>The context object where the wait will be implemented.</td></tr>
    <tr><td class="paramname">timeout</td><td>The timeout to wait for changes. If no changes happens, the function returns. The function will block the caller until a call to <a class="el" href="group__nopoll__loop_ga603ff3fbf35af843128f07915a4f2634.html#ga603ff3fbf35af843128f07915a4f2634">nopoll_loop_stop</a> is done in the case timeout passed is 0.</td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>The function returns 0 when finished without error or -2 in the case ctx is NULL or timeout is negative. Function returns -3 if timeout was reached. Function returns -4 in the case ctx-&gt;io_engine-&gt;wait failed to implement wait or it reported error.</dd></dl>
<p><b>Recovering from IO Wait failure (return code -4)</b></p>
<p>In the case I/O wait mechanism fails, this function will return -4. In can catch that error code and recover (keep on waiting), log the error or implement some other policy.</p>
<p>Here is an example:</p>
<div class="fragment"><div class="line"><span class="keywordflow">while</span> (<a class="code" href="group__nopoll__decl__module_gabf0a233e3a226eab0f1bf27f534e9673.html#gabf0a233e3a226eab0f1bf27f534e9673">nopoll_true</a>) {</div>
<div class="line">    <span class="comment">// wait for ever</span></div>
<div class="line">    <span class="keywordtype">int</span> error_code = <a class="code" href="group__nopoll__loop_gade692de4fdd3e8e31e6ac290709942f2.html#gade692de4fdd3e8e31e6ac290709942f2">nopoll_loop_wait</a> (ctx, 0);</div>
<div class="line"> </div>
<div class="line">    <span class="keywordflow">if</span> (error_code == -4) {</div>
<div class="line">         printf (<span class="stringliteral">&quot;Log here you had an error cause by the io waiting mechanism, errno=%d\n&quot;</span>, errno);</div>
<div class="line">         <span class="comment">// recover by just calling io wait engine</span></div>
<div class="line">         <span class="comment">// try to limit recoveries to avoid infinite loop</span></div>
<div class="line">         <span class="keywordflow">continue</span>;</div>
<div class="line">    }</div>
<div class="ttc" id="agroup__nopoll__decl__module_gabf0a233e3a226eab0f1bf27f534e9673_html_gabf0a233e3a226eab0f1bf27f534e9673"><div class="ttname"><a href="group__nopoll__decl__module_gabf0a233e3a226eab0f1bf27f534e9673.html#gabf0a233e3a226eab0f1bf27f534e9673">nopoll_true</a></div><div class="ttdeci">#define nopoll_true</div><div class="ttdoc">Common definition to have true (nopoll_true) value (which is defined to 1 integer value).</div><div class="ttdef"><b>Definition:</b> nopoll_decl.h:254</div></div>
<div class="ttc" id="agroup__nopoll__loop_gade692de4fdd3e8e31e6ac290709942f2_html_gade692de4fdd3e8e31e6ac290709942f2"><div class="ttname"><a href="group__nopoll__loop_gade692de4fdd3e8e31e6ac290709942f2.html#gade692de4fdd3e8e31e6ac290709942f2">nopoll_loop_wait</a></div><div class="ttdeci">int nopoll_loop_wait(noPollCtx *ctx, long timeout)</div><div class="ttdoc">Allows to implement a wait over all connections registered under the provided context during the prov...</div><div class="ttdef"><b>Definition:</b> nopoll_loop.c:228</div></div>
</div><!-- fragment --><p><b> </b></p>

<p class="reference">References <a class="el" href="group__nopoll__decl__module_ga27de5123df9df2da67e01994fcf6b272.html#ga27de5123df9df2da67e01994fcf6b272">nopoll_return_val_if_fail</a>.</p>

</div>
</div>
    </td>
  </tr>
</table>
</div><!-- contents -->
<!-- </div>
<div class="lateral-ad">
  <iframe src="http://www.aspl.es/web-ads/index.php?hcolor=fdff4f&amp;fsize=10&amp;bg=555753&amp;fg=ffffff&amp;width=150&amp;type=vertical" height="420" align="middle" width="100%" scrolling="no" frameborder="0"></iframe>
</div> -->
<div class="footer">
<div class="sponsored-content">
<table style='border: 0px; width: 100%'>
  <tr>
    <td class='dotted'>
      <h1>More software</h1>
      <ul>
        <li><a href="https://myqtthub.com/en">MyQttHub.com</a></li>            
	<li><a href="http://www.core-admin.com">Core-Admin</a></li>
	<li><a href="http://www.aspl.es/vortex">Vortex Library</a></li>
	<li><a href="http://www.aspl.es/turbulence">Turbulence Server</a></li>
	<li><a href="http://www.aspl.es/xml">Axl Library</a></li>
	<li><a href="http://www.aspl.es/xml">ext-Dns toolkit</a></li>
	<li><a href="http://www.aspl.es/nopoll">noPoll WebSocket toolkit</a></li>
	<li><a href="http://www.aspl.es/valvula">Valvula policy daemon</a></li>
	<li><a href="http://www.aspl.es/jsVortex">jsVortex js BEEP</a></li>
      </ul>
    </td>
    <td class='dotted'>
      <h1>Linux servers</h1>
      <ul>
	<li><a href="http://www.asplhosting.com/portal/servidores/servidores-vps">VPS linux servers with administration support</a></li>
	<li><a href="http://www.asplhosting.com/portal/servidores/servidores-dedicados">Dedicated linux servers with administration support</a></li>
	<li><a href="http://www.aspl.es/portal/servicios/instalacion-de-servidores-linux">Linux server installation</a></li>
	<li><a href="http://www.aspl.es/portal/servicios/instalacion-de-servidores-linux">Linux server administration</a></li>
	<li><a href="http://www.aspl.es/portal/servicios/mantenimiento-de-servidores-linux">Linux server maintenance</a></li>
	<li><a href="http://www.asplhosting.com/portal/servidores/servidores-de-correo-dedicados">Dedicated mail servers</a></li>
	<li><a href="http://www.asplhosting.com/portal/servidores/backup-de-servidores-externos">Server backup</a></li>
      </ul>
    </td>
    <td>
      <h1>Hosting services</h1>
      <ul>
	<li><a href="http://www.asplhosting.com/portal/web-hosting/comparativa-hosting-web-linux">Web hosting</a></li>
	<li><a href="http://www.asplhosting.com/portal/web-hosting/comparativa-hosting-web-linux">Profesional Linux hosting</a></li>
	<li><a href="http://www.asplhosting.com/portal/web-hosting/planes-de-correo">Mail hosting plans</a></li>
	<li><a href="http://www.asplhosting.com/portal/registro-de-dominios">Domain registration</a></li>
	<li><a href="http://www.asplhosting.com/portal/web-hosting/planes-de-correo-para-envio-masivo-massive-smtp">Massive mail services</a></li>
	<li><a href="http://www.asplhosting.com/portal/web-hosting/alojamiento-wordpress-seguro-y-fiable">Wordpress hosting</a></li>
	<li><a href="https://myqtthub.com/en">Cloud MQTT Broker</a></li>						
      </ul>
    </td>
    <td><a href="http://www.asplhosting.com"><img style="border: 0px" src="hacha-100x171.png" ></a></td>
  </tr>
</table>
</div> <!-- sponsored-content -->
<small>noPoll: a WebSocket (RFC 6455) implementation. &nbsp; Copyright 2022 (C) Advanced Software Production Line, S.L.</small>
</div>
</body>
</html>
